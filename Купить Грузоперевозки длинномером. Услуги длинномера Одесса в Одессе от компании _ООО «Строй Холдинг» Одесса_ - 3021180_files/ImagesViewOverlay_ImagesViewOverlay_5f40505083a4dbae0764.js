(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ImagesViewOverlay"],{XAhM:function(e,t,n){"use strict";n.r(t);var r=n("D6N8"),i=n.n(r),l=n("Kq/Z"),a=n.n(l),o=n("W9rq"),u=n("R17g"),c=n("4zy3"),s=n("Mumr"),f=n("17os"),m=n.n(f),d=n("Or47"),h=n("bN30"),v=n.n(h),g=(n("xGe1"),n("IecV"),n("m1fM")),p=n.n(g),b=n("7E4i"),y=n("teAx"),w=n.n(y),I=n("uwg9"),_=n.n(I);function S(e,t){return $(e)||P(e,t)||j(e,t)||O()}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,l=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,l=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw l}}return n}}function $(e){if(Array.isArray(e))return e}var k,R=S(Array.from([0,1]),2),N=R[0],z=R[1],F=7,A={getInitialState:function(){return{activeFullImage:this.props.initialImage["640x640"],activeFullImageIndex:0,scrollPosition:[0,this.props.peekSize||F],scrollableLeft:!1,scrollableRight:!0}},componentWillReceiveProps:function(e){var t=this;null!=e.initialImage&&this.setState({activeFullImageIndex:0,scrollPosition:[0,this.props.peekSize||F],scrollableLeft:!1,scrollableRight:!0},(function(){return t.changeFullImage(e.initialImage["640x640"])}))},iterateFullImage:function(e){var t=this;null==e&&(e=this.state.activeFullImageIndex+1),this.props.images.length<=1||(e>=this.props.images.length?e=0:e<0&&(e=this.props.images.length-1),this.scrollThumbs(null,e),this.setState({activeFullImageIndex:e},(function(){return t.changeFullImage(t.props.images[e]["640x640"])})))},changeFullImage:function(e){var t=this,n=new Image;n.onload=function(){return t.setState({activeFullImage:e})},n.src=e,n.complete||this.setState({activeFullImage:"/image/ajax-loader.gif"})},calculateNewScroll:function(e,t,n,r,i){var l,a=this.props.peekSize||F;switch(e){case N:l=Math.max(0,t-n),i=[Math.max(i[0]-a,0),Math.max(i[1]-a,a)];break;case z:l=Math.min(r,t+n),i=[Math.min(i[0]+a,this.props.images.length-a),Math.min(i[1]+a,this.props.images.length)]}return[l,i]},scrollThumbs:function(e,t){var n=this,r=this.refs.thumbs_list;if(r){var i=_()(r),l=this.state.scrollPosition,a=i.scrollLeft(),o=i.width(),u=r.scrollWidth-o;if(null!=t&&t>=0&&t<this.props.images.length)for(e=t<l[0]?N:z;!(l[0]<=t&&t<l[1]);){var c=S(this.calculateNewScroll(e,a,o,u,l),2);a=c[0],l=c[1]}else if(null!=e){var s=S(this.calculateNewScroll(e,a,o,u,l),2);a=s[0],l=s[1]}i.animate({scrollLeft:a},(function(){return n.setState({scrollableLeft:a>0,scrollableRight:a<u,scrollPosition:l})}))}}};function C(e){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=W();return function(){var n,r=J(e);if(t){var i=J(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==C(t)&&"function"!==typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n,r){k||(k="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:k,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var G,K=0,X=1,Z=7,B=p()({displayName:"ImagesViewOverlay",mixins:[A],getDefaultProps:function(){return{images:[],peekSize:Z,initialImage:null}},getInitialState:function(){return{visible:!0}},closeROverlay:function(){this.setState({visible:!1})},changeImage:function(e){this.iterateFullImage(e)},nextImage:function(){this.changeImage(this.state.activeFullImageIndex+1)},prevImage:function(){this.changeImage(this.state.activeFullImageIndex-1)},scrollLeft:function(){this.scrollThumbs(K)},scrollRight:function(){this.scrollThumbs(X)},render:function(){var e=this,t=this.props.images,n=t.length,r=this.props.peekSize,l=this.state.activeFullImage,a=this.state.activeFullImageIndex,o=t[a].title,u=w()({"b-images-view__btn b-images-view__btn_direction_left":!0,"b-images-view__btn_state_left-disabled":!this.state.scrollableLeft}),c=w()({"b-images-view__btn b-images-view__btn_direction_right":!0,"b-images-view__btn_state_right-disabled":!this.state.scrollableRight});return Q(b["default"],{visible:this.state.visible,onClose:this.closeROverlay},void 0,Q("div",{className:"b-images-view"},void 0,Q("strong",{className:"b-images-view__header",title:o},void 0,o),n>r?Q("span",{className:u,onClick:this.scrollLeft}):null,n>1?i.a.createElement("ul",{className:"b-images-view__gallery",ref:"thumbs_list"},t.map((function(t,n){return Q("li",{className:w()({"b-images-view__item":!0,"b-images-view__item_state_active":n===a}),onClick:function(){return e.changeImage(n)}},"thumb_".concat(n),Q("img",{className:"b-images-view__item-photo",src:t["100x100"],alt:t.title}))}),this)):null,n>r?Q("span",{className:c,onClick:this.scrollRight}):null,Q("div",{className:"b-images-view__photo-holder",title:o},void 0,Q("img",{className:"b-images-view__photo",src:l,alt:o,onClick:this.nextImage}),n>1?Q("span",{className:" b-images-view__button b-images-view__button_direction_left ",onClick:this.prevImage}):null,n>1?Q("span",{className:" b-images-view__button b-images-view__button_direction_right ",onClick:this.nextImage}):null)))}}),H=(function(e){T(n,e);var t=E(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).imagesViewOverlayRef=i.a.createRef(),r}return L(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.images,n=e.currentImageId;if(!n)return null;for(var r=0,i=0;i<t.length;i++)if(t[i].id===parseInt(n,10)){r=i;break}return this.imagesViewOverlayRef.current.setState({activeFullImage:t[r]["640x640"],activeFullImageIndex:r}),this.imagesViewOverlayRef.current.scrollThumbs(null,r),null}},{key:"render",value:function(){return i.a.createElement(B,{ref:this.imagesViewOverlayRef,images:this.props.images,initialImage:this.props.images[0]})}}]),n})(i.a.Component);function Y(e,t,n,r){G||(G="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:G,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ee(){var e=te(["\n    query productImagesQuery($productId: Int!) {\n        product(id: $productId) {\n            name,\n            thumbnails: images(width: 100, height: 100),\n            viewImages: images(width: 640, height: 640)\n        }\n    }\n"]);return ee=function(){return e},e}function te(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ne,re=v()(ee()),ie=function(e,t){return Object(o["c"])(re,{options:function(){return{variables:{productId:e}}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.product,i=r.thumbnails,l=r.viewImages,a=r.name;if(!l||!l.length)return null;var o=l.map((function(e,t){var n=e.id,r=e.url,l=t+1;return{id:n,title:a?"".concat(a,", фото ").concat(l):"фото ".concat(l),"640x640":r,"100x100":i[t].url}}));return Y(H,{images:o,currentImageId:t})}))};function le(e,t,n,r){ne||(ne="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:ne,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ae(){var e=oe(["\n    query albumImages($folderId: Int) {\n        galleryList(folder_id: $folderId, page: 1, limit: 500) {\n            title,\n            image {\n                id,\n                thumbnail: url(width: 100, height: 100),\n                view: url(width: 640, height: 640)\n            }\n        } \n    }\n"]);return ae=function(){return e},e}function oe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ue,ce=v()(ae()),se=function(e,t){var n={};return e&&(n={folderId:e}),Object(o["c"])(ce,{options:function(){return{variables:n}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.galleryList;if(!r||!r.length)return null;var i=r.map((function(e){var t=e.title,n=e.image;return{title:t,id:n.id,"640x640":n.view,"100x100":n.thumbnail}}));return le(H,{images:i,currentImageId:t})}))};function fe(e,t,n,r){ue||(ue="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:ue,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function me(){var e=de(["\n    query certificateImages($folderId: Int){ \n        certificates(folder_id: $folderId) {\n            title,\n            image {\n                id,\n                thumbnail: url(width: 100, height: 100),\n                view: url(width: 640, height: 640)\n            }\n        } \n    }\n"]);return me=function(){return e},e}function de(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var he,ve=v()(me()),ge=function(e,t){var n={};return e&&(n={folderId:e}),Object(o["c"])(ve,{options:function(){return{variables:n}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.certificates;if(!r||!r.length)return null;var i=r.map((function(e){var t=e.title,n=e.image;return{title:t,id:n.id,"640x640":n.view,"100x100":n.thumbnail}}));return fe(H,{images:i,currentImageId:t})}))};function pe(e,t,n,r){he||(he="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:he,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function be(){var e=ye(["\n    query articleImage($articleId: Int!){ \n        article(id: $articleId) {\n            title,\n            imageId,\n            thumbnail: imageUrl(width: 100, height: 100),\n            view: imageUrl(width: 640, height: 640)\n        } \n    }\n"]);return be=function(){return e},e}function ye(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var we,Ie=v()(be()),_e=function(e,t){return Object(o["c"])(Ie,{options:function(){return{variables:{articleId:e}}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.article,i=r.title,l=r.imageId,a=r.thumbnail,o=r.view;return o?pe(H,{images:[{title:i,id:l,"640x640":o,"100x100":a}],currentImageId:t}):null}))};function Se(e,t,n,r){we||(we="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:we,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Oe(){var e=je(["\n    query newsImage($newsId: Int!){ \n        news(id: $newsId) {\n            title,\n            imageId,\n            thumbnail: imageUrl(width: 100, height: 100),\n            view: imageUrl(width: 640, height: 640)\n        } \n    }\n"]);return Oe=function(){return e},e}function je(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xe,Pe=v()(Oe()),$e=function(e,t){return Object(o["c"])(Pe,{options:function(){return{variables:{newsId:e}}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.news,i=r.title,l=r.imageId,a=r.thumbnail,o=r.view;return o?Se(H,{images:[{title:i,id:l,"640x640":o,"100x100":a}],currentImageId:t}):null}))};function ke(e,t,n,r){xe||(xe="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:xe,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Re(){var e=Ne(["\n    query portfolioImagesQuery($portfolioId: Int!) {\n        portfolio(id: $portfolioId) {\n            title,\n            portfolioPhotos {\n                title\n                image {\n                    id,\n                    thumbnail: url (width: 100, height: 100),\n                    view: url(width: 640, height: 640)\n                }\n            }\n        }\n    }\n"]);return Re=function(){return e},e}function Ne(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ze,Fe=v()(Re()),Ae=function(e,t){return Object(o["c"])(Fe,{options:function(){return{variables:{portfolioId:e}}}})((function(e){var n=e.data;if(n.loading)return null;var r=n.portfolio,i=r.title,l=r.portfolioPhotos;if(!l||!l.length)return null;var a=l.slice().sort((function(e,t){return e.image.id-t.image.id})).map((function(e,t){var n=e.portfolioPhotoTitle,r=e.image,l=t+1;return{id:r.id,title:n||"".concat(i,", фото ").concat(l),"640x640":r.view,"100x100":r.thumbnail}}));return ke(H,{images:a,currentImageId:t})}))};function Ce(e,t,n,r){ze||(ze="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=r;else if(l>1){for(var a=new Array(l),o=0;o<l;o++)a[o]=arguments[o+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:ze,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"ImagesViewOverlayImpl",(function(){return Ee}));var Me=m.a.ns("ImagesViewOverlay").error,qe={product_images:ie,album_images:se,certificate_images:ge,article_images:_e,news_images:$e,portfolio_images:Ae},Le=["album_images","certificate_images"],Te=(function(){var e=Object(d["parse"])(window.location.href).path,t="/graphql";if(e.startsWith("/cs/")){var n=e.split("/");t="/".concat(n[1],"/").concat(n[2],"/graphql")}return new u["a"]({link:Object(c["a"])({uri:t,credentials:"same-origin"}),cache:new s["a"]})})(),Ve=function(e,t,n,r){var i=qe[e];if(!i)return null;var l=parseInt(t,10);if(isNaN(l)&&!Le.includes(e))return Me("ImagesViewOverlay render for type error, bad entityId: ".concat(t)),null;var u=i(l,n);return a.a.render(Ce(o["a"],{client:Te},void 0,Ce(u,{})),r)},Ee=function(e,t){var n=null,r=document.body.appendChild(document.createElement("div")),i=function(){Ve(t.Type,t.EntityId,n,r)};return{showImage:function(e){n=e,i()}}}}}]);